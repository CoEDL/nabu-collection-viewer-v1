<div layout="row" layout-align="center center">
    <md-button
        class="md-primary small-button"
        ng-if="vm.element.eaf"
        ng-disabled="!vm.transcriptions['eaf'] || vm.selected === 'eaf'"
        ng-click="vm.select('eaf')">
            EAF
    </md-button>
    <md-button
        class="md-primary small-button"
        ng-if="vm.element.trs"
        ng-disabled="!vm.transcriptions['trs'] || vm.selected === 'trs'"
        ng-click="vm.select('trs')">
            TRS
    </md-button>
    <md-button
        class="md-primary small-button"
        ng-if="vm.element.ixt"
        ng-disabled="!vm.transcriptions['ixt'] || vm.selected === 'ixt'"
        ng-click="vm.select('ixt')">
            IXT
    </md-button>
    <md-button
        class="md-primary small-button"
        ng-if="vm.element.flextext"
        ng-disabled="!vm.transcriptions['flextext'] || vm.selected === 'flextext'"
        ng-click="vm.select('flextext')">
            FLEXTEXT
    </md-button>
</div>

<div layout="row" layout-align="center center" flex>
    <div ng-show="vm.loadingTranscriptions" style="width: 500px; margin: 40px;">
        <md-progress-linear md-mode="indeterminate"></md-progress-linear>
    </div>
</div>

<div class="transcription-panel" ng-if="vm.showTranscription">
    <div ng-repeat="(k, v) in vm.selectedTranscription" ng-if="v.value || v.referenceValue" layout="column" class="md-margin">
        <div id="{{k}}"></div>
        <div layout="row">
            <div>
                <md-button class="small-button" ng-click="play({
                    'start': vm.selectedTranscription[k],
                    'end': vm.selectedTranscription[k+1]
                })">
                    <i class="fa fa-play fa-lg"></i>
                    Play ({{v.time | minutesSeconds}})
                </md-button>
            </div>
            <div flex></div>
            <div>
                <fragment-citation
                    type="transcript"
                    selection="selected.transcript"
                    fragment-data="vm.selectedTranscription[k]"
                    item-data="itemData"
                    name="name"
                ></fragment-citation>
            </div>
        </div>
        <div layout="row" layout-padding ng-class="{ 'transcription-selected': $index==vm.selectedIndex}" class="md-subhead">
            {{v.value}}
            <br/>
            {{v.referenceValue}}
        </div>
    </div>
</div>

<div class="transcription-panel" ng-if="vm.showInterlinearText">
    <div ng-repeat="(k, sentence) in vm.selectedTranscription" layout="column" class="md-margin">
        <div id="{{k}}"></div>
        <div layout="row">
            <div>
                <md-button class="small-button" ng-click="play({ 'start': interlinearText[k], 'end': interlinearText[k+1] })">
                    <i class="fa fa-play fa-lg"></i> Play ({{sentence.time | minutesSeconds}})
                </md-button>
            </div>
            <div flex></div>
            <div>
                <fragment-citation
                    type="interlinear"
                    selection="selected.interlinear"
                    fragment-data="interlinearText[k]"
                    item-data="itemData"
                    name="name"
                ></fragment-citation>
            </div>
        </div>
        <div layout-padding>
            <div class="md-title" ng-class="{ 'transcription-selected': $index==selectedIndex}">{{sentence.transcription}}</div>
            <div class="md-title highlight-translation">{{sentence.translation}}</div>
            <div layout="row" layout-padding layout-wrap>
                <table ng-repeat="word in sentence.words" class="table-style">
                    <tbody class="md-caption highlight-word">
                        <tr class="" ng-if="word.text">
                            <td class="td-style" colspan="{{word.words.length}}">{{word.text}}</td>
                        </tr>
                        <tr class="" ng-if="!word.text">
                            <td class="td-style" ng-repeat="w in word.words">{{w.text}}</td>
                        </tr>
                        <tr class="highlight-morpheme">
                            <td class="td-style" ng-repeat="w in word.words">{{w.morpheme}}</td>
                        </tr>
                        <tr class="highlight-gloss">
                            <td class="td-style" ng-repeat="w in word.words">{{w.gloss}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
